@using Microsoft.AspNetCore.Identity
@model IdentityUser

@inject SignInManager<IdentityUser> signInManager

@{
    ViewData["Title"] = "Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1>Details</h1>

<div>
    <h4>User</h4>
    <hr />
    <dl class="row">
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Id)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Id)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.UserName)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.UserName)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.Email)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.Email)
        </dd>
        <dt class = "col-sm-2">
            @Html.DisplayNameFor(model => model.EmailConfirmed)
        </dt>
        <dd class = "col-sm-10">
            @Html.DisplayFor(model => model.EmailConfirmed)
        </dd>
    </dl>
</div>
<div class="mb-4">
    <h4>Session Management</h4>
    <hr />
    <button id="invalidateSessionsButton">Invalidate User Sessions</button>
</div>
<div>
    <h4>Assigned Roles</h4>
    <hr />
    <dl class="row" id="assignedRolesList">
	</dl>
</div>
<div>
    <h4>Unassigned Roles</h4>
    <hr />
    <dl class="row" id="unassignedRolesList">
	</dl>
</div>
<div>
    <a asp-action="Index">Back to List</a>
</div>

@section modalWindows {
    <div id="errorToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true" style="position: absolute; top: 15px; left: 30px;" data-delay="3000">
      <div class="toast-header">
        <span class="mr-auto text-danger"><b>Oops! </b>An error has occured.</span>
        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="toast-body"></div>
    </div>
    <div id="warningToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true" style="position: absolute; top: 15px; left: 30px;" data-delay="3000">
      <div class="toast-header">
        <span class="mr-auto text-warning"><b>Hey listen! </b>You probably should know this.</span>
        <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="toast-body"></div>
    </div>
}

@section Scripts {
    <script>
        const userId = '@Model.Id'
        const canEditRoles = @User.IsInRole("Administrator").ToString().ToLower()
	</script>
    <script type="text/javascript" src="~/js/Users/Index.js" asp-append-version="true"></script>
}